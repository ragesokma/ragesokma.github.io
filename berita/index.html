<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Berita | RAGE SOKMA</title>
  <meta name="description" content="Kumpulan berita kegiatan RAGE SOKMA terbaru." />
  <link rel="canonical" href="https://ragesokma.github.io/berita/" />

  <link rel="stylesheet" href="../assets/css/app.css" />
</head>
<body>

  <!-- Header (kalau di project kamu pakai include/header via JS, biarkan sesuai project) -->
  <div id="siteHeader"></div>

  <main>
    <section class="section">
      <div class="container">
        <h1 class="section-title">Berita</h1>
        <p class="section-subtitle">Kabar terbaru kegiatan dan aksi nyata RAGE SOKMA.</p>

        <div class="grid grid-3" id="newsGrid"></div>

        <!-- Pagination (optional, kalau JS kamu support) -->
        <div class="pagination" id="newsPagination" style="margin-top:24px;"></div>
      </div>
    </section>
  </main>

  <div id="siteFooter"></div>

  <script src="../assets/js/app.js"></script>

  <!-- Script sederhana: ambil posts.json lalu render berita -->
  <script>
    (async function () {
      try {
        const res = await fetch("../assets/data/posts.json", { cache: "no-store" });
        const posts = await res.json();

        const berita = posts
          .filter(p => (p.type || "").toLowerCase() === "berita")
          .sort((a,b) => new Date(b.date) - new Date(a.date));

        const grid = document.getElementById("newsGrid");
        grid.innerHTML = berita.map(p => {
          const img = p.image ? p.image : "../assets/images/placeholder.jpg";
          const label = p.label || "Berita";
          const date = p.date_display || p.date || "";
          const url = p.url || (`../berita/${p.slug}.html`);
          return `
            <article class="news-card">
              <a href="${url}">
                <img src="${p.image || img}" alt="${p.title || ''}">
              </a>
              <div class="news-body">
                <span class="news-label">${label}</span>
                <h3><a href="${url}">${p.title || ""}</a></h3>
                <time>${date}</time>
                <p>${p.excerpt || ""}</p>
              </div>
            </article>
          `;
        }).join("");
      } catch (e) {
        console.error(e);
      }
    })();
  </script>

</body>
</html>
